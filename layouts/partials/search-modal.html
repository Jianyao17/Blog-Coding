{{- $placeholder := (T "searchPlaceholder") | default "Search..." -}}


<div class="hx-relative hx-hidden md:hx-block md:hx-w-64">
  <div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300">
    <div id="search-button"
         class="hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm contrast-more:hx-border
                hx-cursor-pointer hx-bg-black/[.05] dark:hx-bg-gray-50/10 placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 active:hx-ring-2 hx-select-none
                hx-ps-8 contrast-more:hx-border-current hover:hx-bg-neutral-300 dark:hover:hx-bg-neutral-700 hx-ring-gray-200 dark:hx-ring-neutral-800"> 
      <div class="hx-absolute hx-left-2 hx-inset-y-2 hx-capitalize">
        {{- partial "utils/icon.html" (dict "name" "search" "attributes" "height=18 class=\"group-data-[theme=light]:hx-hidden\"") -}}
      </div>
      Search... 
    </div>
    <kbd class="search-key hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] 
                hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current 
                contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex">
      CTRL K
    </kbd>
  </div>
</div>

<!-- Search Modal -->
<div id="search-modal" style="display: none;" class="hx-fixed hx-inset-0 hx-hidden md:hx-flex hx-justify-center hx-backdrop-blur-sm hx-bg-black hx-bg-opacity-50">
  <div class="search-wrapper hx-relative hx-top-16 hx-w-full md:hx-w-[90vw] hx-h-fit hx-max-w-3xl hx-rounded-2xl hx-shadow-xl hx-border
              hx-p-3 hx-z-50 contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50
            hx-border-gray-200 hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900">

    <div class="hx-relative hx-flex hx-items-center hx-rounded-lg hx-text-gray-900 hx-bg-white dark:hx-bg-neutral-800 
              hx-border-gray-200 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300">
      <div class="hx-absolute hx-left-3 hx-capitalize">
        {{- partial "utils/icon.html" (dict "name" "search" "attributes" "height=20 class=\"group-data-[theme=light]:hx-hidden\"") -}}
      </div>
      <input
        placeholder="{{ $placeholder }}" type="search" spellcheck="false" value="" autofocus
        class="search-input hx-px-3 hx-py-3 hx-ps-10 hx-pe-14 hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-transition-colors hx-text-base hx-leading-tight
               md:hx-text-sm placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current 
               hx-ring-1 hx-ring-neutral-400 dark:hx-ring-neutral-600" style="outline: 0;"
      />
      <kbd class="hx-absolute hx-my-1.5 hx-me-2 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] 
                  hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current 
                  contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex">
        ESC
      </kbd>
    </div>
    
    <div class="hx-w-full">
      <ul class="search-results hextra-scrollbar hx-mt-6 hx-h-fit hx-hidden hx-overflow-auto hx-overscroll-contain hx-py-2.5 hx-min-h-[100px] hx-inset-0 
                 hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),500px)]"
          style="transition: max-height 0.2s ease 0s;" 
      ></ul>
    </div>
  </div>
</div>
